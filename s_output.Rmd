---
title: "Výstup: dokumentace, validace"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE,
                      comment = "")
source("_targets_packages.R")
options(crayon.enabled = FALSE)
cnf <- config::get()
names(cnf) <- paste0("c_", names(cnf))
list2env(cnf, envir = .GlobalEnv)
```

```{r load targets}
targets::tar_load(ef_pub)
targets::tar_load(efs_prv)
targets::tar_load(efs_zop)
targets::tar_load(efs_fin)
targets::tar_load(sum_codebook)
targets::tar_load(prj_codebook)
targets::tar_load(efs_tagged)
targets::tar_load(esif_tagged_sum)
targets::tar_load(esif_tagged_sum_op)
targets::tar_load(efs_tagged_sum_prj)
```

# {.tabset}

## Náhled hlavního výstupu {.tabset .tabset-pills}

### Všechny OP

```{r plot-all-op, out.width="100%"}
tar_read(plot_tagged_op)
```

```{r plot-weighted-op, out.width="100%"}
targets::tar_read(plot_weighted_op)
```

### SZP vč. PRV

```{r, out.width="100%"}
targets::tar_read(plot_tagged_agri)
```



## Dokumentace hlavního výstupu

### Soubory

Vše v `` `r  
c_export_dir` `` ([Github](`r paste0(c_repo_remote, "/tree/master/", c_export_dir)`)) 

- OP + klimatag: `` `r  
c_export_all_ops_xlsx` `` / `` `r  
c_export_all_ops_csv` ``
- totéž + kategorie, z níž je odvozen klimatag: `` `r  
c_export_all_ops_detail_xlsx` `` / `` `r  
c_export_all_ops_detail_csv` ``
- totéž + kategorie, z níž je odvozen klimatag + spec. cíl; vše mimo PRV: `` `r  
c_export_nonagri_detail_xlsx` `` / `` `r  
c_export_nonagri_detail_csv` ``
- totéž + kategorie, z níž je odvozen klimatag + spec. cíl + projekt; vše mimo PRV: `` `r  
c_export_nonagri_projekty_xlsx` `` / `` `r  
c_export_nonagri_projekty_parquet` `` - velký soubor, export je ve formátu Parquet
- celé CAP výdaje s klimatagy a opatřeními determinujícími klimatag: `` `r  
c_export_agri_detail_xlsx` `` / `` `r  
c_export_agri_detail_csv` ``

CSV soubory uzpůsobeny pro Excel (úprava konce řádků) a CEE region (odděleno středníky, desetinná čárka).

### Codebook {.tabset .tabset-pills}

#### Projektová úroveň

Zapsáno v `r file.path(c_export_dir, c_export_cdbk_prj)`

```{r codebook-prj}
prj_codebook
```


#### Součty

Zapsáno v `r file.path(c_export_dir, c_export_cdbk_sum)`

```{r codebook-sum}
sum_codebook
```

## Náhled proměnných {.tabset .tabset-pills}

### Projektová úroveň

```{r columns}
glimpse(efs_tagged_sum_prj)
```

### Součty

```{r columns-sum}
glimpse(esif_tagged_sum_op)
```


## Validace výstupu

IN PROGRESS


